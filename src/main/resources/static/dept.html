<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" type="text/css" href="minjoo.css">
<script type="text/javascript"
	src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script type="text/javascript">
	function listDept() {			
		$("#list").empty();
		$.getJSON("/listDept", function(data) {
			var arr = data;
			$.each(arr, function(idx, d) {
				var tr = $("<tr></tr>");
				var td1 = $("<td></td>").html(d.dno);
				var td2 = $("<td></td>").html(d.dname);
				var td3 = $("<td></td>").html(d.dloc);
				$(tr).append(td1, td2, td3);
				$("#list").append(tr);
			});
		});
	};

	$(function() {

		var arr;
		listDept();

		$("#btnInsert").click(function() {
			var dept = $("#f").serialize();
			$.ajax("/insertDept", {
				data : dept,
				success : function(r) {
					listDept();
				}
			});
		});
	})
</script>
</head>
<body>
	<form id="f">
	<table>
	<tr>
		<td>부서번호:</td>
		<td><input type="text" name="dno" id="dno"></td>
	</tr>
	<tr>
		<td>부서명:</td>
		<td><input type="text" name="dname" id="dname"></td>
	</tr>
	<tr>
		<td>부서장소:</td>
		<td><input type="text" name="dloc" id="dloc"></td>
	</tr>
	</table>
	</form>
	<button id="btnInsert">부서등록</button>

	<table id="tb" border="1" width="50%">
		<thead>
			<th>부서번호</th>
			<th>부서명</th>
			<th>부서위치</th>
		</thead>
		<tbody id="list"></tbody>
	</table>
</body>
</html>